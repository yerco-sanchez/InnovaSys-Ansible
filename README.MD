# ğŸš€ Proyecto InnovaSys â€“ AutomatizaciÃ³n con Ansible

Este repositorio contiene un proyecto de **aprovisionamiento automatizado** usando **Ansible** para la startup _InnovaSys_.  
El servidor objetivo (Ubuntu Server 24.04) serÃ¡ configurado con:

1. ğŸŒ **Portal de Bienvenida (Intranet)** â†’ Servidor web Apache con pÃ¡gina personalizada.
2. ğŸ“‚ **Repositorio de Archivos Centralizado** â†’ Servidor Samba con recurso compartido seguro para el equipo de desarrollo.

---

## ğŸ“‚ Estructura del Proyecto

```
InnovaSys-Ansible/
â”œâ”€ hotsts # Inventario Ansible con IPs y usuarios
â”œâ”€ site.yml # Playbook principal
â”œâ”€ group_vars/
â”‚ â””â”€ servidor-innovasys.yml # Variables especÃ­ficas del host
â”œâ”€ ansible.cfg # ConfiguraciÃ³n de Ansible
â”œâ”€ roles/
â”‚ â”œâ”€ apache/
â”‚ â”‚ â”œâ”€ tasks/main.yml
â”‚ â”‚ â”œâ”€ handlers/main.yml
â”‚ â”‚ â”œâ”€ templates/index.html.j2
â”‚ â”‚ â””â”€ defaults/main.yml
â”‚ â””â”€ samba/
â”‚ â”œâ”€ tasks/main.yml
â”‚ â”œâ”€ handlers/main.yml
â”‚ â”œâ”€ templates/smb.conf.j2
â”‚ â””â”€ defaults/main.yml
```

---

## âš™ï¸ Requisitos

- **Nodo de control:** Linux Lite con Ansible instalado.
- **Nodo gestionado:** Ubuntu Server 24.04 virgen.
- **SSH sin contraseÃ±a** configurada desde el nodo de control al gestionado.
- Python en el nodo gestionado (generalmente ya instalado en Ubuntu Server).
- ConexiÃ³n de red entre ambos nodos.

---

## ğŸ”‘ ConfiguraciÃ³n SSH sin contraseÃ±a

1. Generar par de claves en el nodo de control:

```bash
ssh-keygen -t rsa -b 4096
```

2. Copiar la clave pÃºblica al nodo gestionado:

```bash
ssh-copy-id operador@192.168.10.100
```

3. Probar conexiÃ³n:

```bash
ssh operador@192.168.10.100
```

---

## ğŸ“Œ ConfiguraciÃ³n de Ansible

### Archivo (`ansible.cfg`)

```ini
[defaults]
inventory = ./hosts
roles_path = ./roles
host_key_checking = True          # Recomendado en producciÃ³n
retry_files_enabled = False
forks = 10
timeout = 30
interpreter_python = auto

bin_ansible_callbacks = True
result_format = yaml

[privilege_escalation]
become = True
become_method = sudo
become_ask_pass = False
```

ğŸ”¹ host_key_checking = True asegura que se valide la identidad del servidor remoto antes de ejecutar tareas.

### Inventario (`hosts`)

Inventario con el servidor gestionado:

```ini
[innovasys]
servidor-innovasys ansible_host=192.168.10.100 ansible_user=operador ansible_ssh_private_key_file=~/.ssh/id_rsa
```

### Variables globales (`group_vars/innovasys.yml`)

```yaml
nombre_empresa: "InnovaSys"
samba_share_name: "Proyectos"
samba_share_path: "/srv/samba/proyectos"
samba_group: "operadores"
samba_user: "operador1"
samba_password: "Innova.2025"
samba_valid_users: "@operadores"
samba_writable: "yes"
samba_browseable: "yes"
samba_create_mask: "0660"
samba_directory_mask: "2770"
```

ğŸ”’ La contraseÃ±a de Samba puede encriptarse con Ansible Vault para mayor seguridad.

---

## ğŸ§© Roles de Ansible

### 1ï¸âƒ£ Rol: apache

- Instala Apache2
- Crea pÃ¡gina de bienvenida personalizada desde plantilla Jinja2
- Inicia y habilita el servicio

### 2ï¸âƒ£ Rol: samba

- Instala Samba
- Crea grupo y usuario del sistema (operadores, operador1)
- Crea directorio compartido /srv/samba/proyectos
- Configura Samba (smb.conf) con acceso solo a desarrolladores
- Establece contraseÃ±a Samba y reinicia el servicio si cambia la configuraciÃ³n

---

## ğŸ’» EjecuciÃ³n del Playbook

En el nodo de control, ejecutar:

```bash
ansible-playbook site.yml
```

Si tu usuario remoto necesita sudo con contraseÃ±a:

```bash
ansible-playbook site.yml -K
```

---

## âœ… VerificaciÃ³n

### ğŸŒ Portal Intranet

Abrir navegador en la mÃ¡quina de control (Linux Lite):

```cpp
http://192.168.10.100/
```

DeberÃ­as ver:
â€œBienvenidos a la Intranet de InnovaSysâ€

### ğŸ“‚ Recurso compartido Samba

Desde el gestor de archivos:

```cpp
smb://192.168.10.100/Proyectos
```

- Usuario: operador1
- ContraseÃ±a: Innova.2025
- DeberÃ­as poder crear y editar archivos dentro del directorio compartido.

---
